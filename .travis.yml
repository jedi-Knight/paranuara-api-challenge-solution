dist: xenial
language: python
python: 3.7
branches:
  only:
    master
cache: 
  - mkdir
  - curl
install:
  - mkdir data
  - curl https://raw.githubusercontent.com/joaosgreccia/hivery-backend-challenge/master/resources/companies.json > data/companies.json
  - curl https://raw.githubusercontent.com/joaosgreccia/hivery-backend-challenge/master/resources/people.json > data/people.json
  - docker build -t paranuara-challenge-solution -f DOCKER .
script:
  - docker run -p 0.0.0.0:8080:8080 -it --entrypoint /paranuara/api/test.sh paranuara-challenge-solution